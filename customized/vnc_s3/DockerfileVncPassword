FROM selenium/node-chrome:4.1.2-20220131

RUN x11vnc -storepasswd prod-vnc-pass-dfdfdd-4699-975f-03ce33d5965c /home/seluser/.vnc/passwd

RUN sudo apt-get update && \
    sudo apt-get install -y \
        unzip \
        curl \
        vim \
    && sudo apt-get clean \
    && sudo curl "https://awscli.amazonaws.com/awscli-exe-linux-x86_64.zip" -o "awscliv2.zip" \
    && sudo unzip awscliv2.zip \
    && sudo ./aws/install \
    && sudo rm -rf \
        awscliv2.zip \
    && sudo apt-get -y purge curl \
    && sudo apt-get -y purge unzip

ADD move_to_s3.sh /opt/bin/move_to_s3.sh
RUN sudo chmod +x /opt/bin/move_to_s3.sh

#==============================
# Supervisor configuration file
#==============================
COPY move_to_s3.conf /etc/supervisor/conf.d/

WORKDIR /home/seluser/
